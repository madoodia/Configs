# Make file for Maya plug-ins on CentOS7 64-bit
# Author: Safak Oner - safak_oner@cinesite.com
#
# ----------------------------------------------------------------------------------------------------
# PROJECT SETTINGS
# ----------------------------------------------------------------------------------------------------
PROJECT_NAME = pointOnMesh
MAYA_VERSION = maya2018
OBJECTS      = pointOnMesh.o


#
# ----------------------------------------------------------------------------------------------------
# LOCATION SETTINGS
# ----------------------------------------------------------------------------------------------------
MAYA_INSTALLATION_LOCATION = /mnt/systems/installs/maya/2018/u1
MAYA_VERSION_LOCATION      = $(MAYA_INSTALLATION_LOCATION)/$(MAYA_VERSION)


#
# ----------------------------------------------------------------------------------------------------
# BUILD SETTINGS
# ----------------------------------------------------------------------------------------------------
TARGET      = $(PROJECT_NAME).so
INCLUDES   += -I$(MAYA_VERSION_LOCATION)/include
LIBS       += -L$(MAYA_VERSION_LOCATION)/lib -lCgGL -lFoundation -lOpenMaya -lOpenMayaUI -lOpenMayaAnim -lOpenMayaRender
DEPENDPATH += -L$(MAYA_VERSION_LOCATION)/lib


#
# ----------------------------------------------------------------------------------------------------
# COMPILER SETTINGS
# ----------------------------------------------------------------------------------------------------
C++         = g++
C++FLAGS    = -g -O3 -pipe -D_BOOL -DREQUIRE_IOSTREAM -DLINUX -Wno-deprecated -fno-gnu-keywords -fPIC -std=c++11
LD          = $(C++) -shared $(C++FLAGS)


.SUFFIXES: .cpp .o .so

.cpp.o:
	$(C++) -c $(INCLUDES) $(C++FLAGS) $<
.o.so:
	$(LD) -o $@ $< $(LIBS)
.cpp.so:
	$(LD) -o $@ $(INCLUDES) $< $(LIBS)

$(TARGET): $(OBJECTS)
	$(LD) -o $@ $(OBJECTS) $(LIBS)

clean:
	-rm -f *.o $(TARGET)